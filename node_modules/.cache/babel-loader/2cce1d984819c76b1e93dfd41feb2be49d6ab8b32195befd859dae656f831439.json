{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{useDispatch}from'react-redux';import{Link}from'react-router-dom';import{Context}from'../Basket';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Tovar=_ref=>{let{currentItem,length,isChange,arr,setArr,setChange}=_ref;const[quentityTovars,setQuentityTovars]=useState(1);const dispatch=useDispatch();const decrementFunc=currentItem=>{setArr(()=>{return arr.map(item=>{if(item.currentItem.id===currentItem.id){if(item.length<=1){return item;}return{...item,length:--item.length};}return item;});});};const incrementFunc=e=>{setArr(()=>{return arr.map(item=>{if(item.currentItem.id===currentItem.id){if(item.length>=currentItem.quantity){return item;}return{...item,length:++item.length};}return item;});});};const deleteTovar=()=>{setArr(prev=>prev.filter(item=>item.currentItem.id!==currentItem.id));};const context=useContext(Context);useEffect(()=>{if(context)return;setArr(()=>{return arr.map(item=>{return{...item,price:parseInt(item.currentItem.price.replaceAll(' ',''))*item.length};});});},[context]);return/*#__PURE__*/_jsxs(\"section\",{className:\"basket-table-item\",children:[/*#__PURE__*/_jsx(Link,{to:\"/shop/\".concat(currentItem===null||currentItem===void 0?void 0:currentItem.path),children:/*#__PURE__*/_jsx(\"img\",{className:\"basket-table-item__img\",src:currentItem===null||currentItem===void 0?void 0:currentItem.imgs[0],alt:\"\"})}),/*#__PURE__*/_jsxs(Link,{className:\"basket-table-item__name\",to:\"/shop/\".concat(currentItem===null||currentItem===void 0?void 0:currentItem.path),children:[\"\\u041F\\u0430\\u0440\\u0444\\u044E\\u043C\\u0435\\u0440\\u043D\\u0430\\u044F \\u0432\\u043E\\u0434\\u0430 \",currentItem===null||currentItem===void 0?void 0:currentItem.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"basket-table-item__price\",children:[/*#__PURE__*/_jsx(\"span\",{children:currentItem===null||currentItem===void 0?void 0:currentItem.price.split(' ')[0]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[currentItem===null||currentItem===void 0?void 0:currentItem.price.split(' ')[1],\" \\u20BD\"]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"tovar-page__quantity\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>decrementFunc(currentItem),className:\"tovar-page-quantity__decrement\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:length,className:\"tovar-page-quentity__count\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>incrementFunc(e),className:\"tovar-page-quantity__increment\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"tovar-page-folded-price\",children:/*#__PURE__*/_jsxs(\"p\",{children:[arr.filter(item=>item.currentItem.id===currentItem.id)[0].price.toLocaleString('ru-RU'),\" \\u20BD\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:deleteTovar,className:\"tovar-page-delete\",children:\"\\u2715\"})]},currentItem===null||currentItem===void 0?void 0:currentItem.id);};export default Tovar;// const filtered = arr.filter(item => item.currentItem.id === currentItem.id);\n// // setArr(arr.map(item => item.currentItem.id === currentItem.id ? item.length++ : item.length))\n// //   setArr(arr.map(item => item.currentItem.id === currentItem.id ? {currentItem: currentItem, length: item.length++} : {currentItem: currentItem, length: item.length}));\n// //   console.log(arr.map(item => item.currentItem.id === currentItem.id ? {currentItem: currentItem, length: item.length++} : {currentItem: currentItem, length: item.length}))\n// console.log(arr.map(item => item.currentItem.id === currentItem.id ? Array.from(new Set(arr.map(item => JSON.stringify([item, {currentItem: currentItem, length: item.length++}])))).map(JSON.parse) : {currentItem: currentItem, length: item.length}))\n// // setArr(arr.map(item => [...arr, {currentItem: item.currentItem, length: item.length++}]));\n// filtered.length++;\n// // console.log(e.currentTarget.parentNode.childNodes[1].value++)\n//   if (length >= currentItem.quantity) {\n//       console.log();\n//   } else {\n//       // setArr(arr.map(item => item.currentItem.id === currentItem.id ? item.length++ : item.length))\n//       // arr.map(item => item.currentItem.id === currentItem.id ? [...arr, {currentItem: currentItem, length: item.length++}] : {currentItem: currentItem, length: item.length});\n//       // setQuentityTovars(prev => ++prev);\n//   }","map":{"version":3,"names":["React","useContext","useEffect","useState","useDispatch","Link","Context","jsx","_jsx","jsxs","_jsxs","Tovar","_ref","currentItem","length","isChange","arr","setArr","setChange","quentityTovars","setQuentityTovars","dispatch","decrementFunc","map","item","id","incrementFunc","e","quantity","deleteTovar","prev","filter","context","price","parseInt","replaceAll","className","children","to","concat","path","src","imgs","alt","name","split","onClick","type","value","toLocaleString"],"sources":["/home/kali/Documents/personal/lescontess/src/layouts/basket/basket__/Tovar.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { Context } from '../Basket';\r\n\r\nconst Tovar = ({ currentItem, length, isChange, arr, setArr, setChange }) => {\r\n  const [quentityTovars, setQuentityTovars] = useState(1);\r\n  const dispatch = useDispatch();\r\n\r\n    const decrementFunc = (currentItem) => {\r\n        setArr(() => {\r\n            return arr.map(item => {\r\n                if (item.currentItem.id === currentItem.id) {\r\n                    if (item.length <= 1) {\r\n                        return item;\r\n                    }\r\n                    return {\r\n                        ...item,\r\n                        length: --item.length\r\n                    }\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n    }\r\n  \r\n    const incrementFunc = (e) => {\r\n        setArr(() => {\r\n            return arr.map(item => {\r\n                if (item.currentItem.id === currentItem.id) {\r\n                    if (item.length >= currentItem.quantity) {\r\n                        return item;\r\n                    }\r\n                    return {\r\n                        ...item,\r\n                        length: ++item.length\r\n                    }\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n    }\r\n\r\n    const deleteTovar = () => {\r\n        setArr(prev => prev.filter(item => item.currentItem.id !== currentItem.id));\r\n    }\r\n\r\n    const context = useContext(Context);\r\n\r\n    useEffect(() => {\r\n        if (context) return;\r\n\r\n        setArr(() => {\r\n            return arr.map(item => {\r\n                return {\r\n                    ...item,\r\n                    price: parseInt(item.currentItem.price.replaceAll(' ', ''))*item.length\r\n                }\r\n            })\r\n        })\r\n    }, [context])\r\n\r\n  return (\r\n    <section key={currentItem?.id} className=\"basket-table-item\">\r\n        <Link to={`/shop/${currentItem?.path}`}> \r\n            <img className='basket-table-item__img' src={currentItem?.imgs[0]} alt=\"\" />\r\n        </Link>\r\n        <Link className='basket-table-item__name' to={`/shop/${currentItem?.path}`}>Парфюмерная вода {currentItem?.name}</Link>\r\n        <p className='basket-table-item__price'>\r\n            <span>{currentItem?.price.split(' ')[0]}</span>\r\n            <br/>\r\n            <span>{currentItem?.price.split(' ')[1]} ₽</span>\r\n        </p>\r\n        <section className='tovar-page__quantity'>\r\n            <button\r\n                onClick={\r\n                    () => decrementFunc(currentItem)\r\n                    }\r\n                    className='tovar-page-quantity__decrement'\r\n                ></button>\r\n            <input type='text' value={length} className='tovar-page-quentity__count'/>\r\n            <button\r\n                onClick={\r\n                    (e) => incrementFunc(e)\r\n                }\r\n                    className='tovar-page-quantity__increment'\r\n                ></button>\r\n        </section>\r\n        <section className='tovar-page-folded-price'>\r\n            <p>{arr.filter(item => item.currentItem.id === currentItem.id)[0].price.toLocaleString('ru-RU')} ₽</p>\r\n        </section>\r\n        <button onClick={deleteTovar} className='tovar-page-delete'>✕</button>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Tovar;\r\n\r\n\r\n\r\n// const filtered = arr.filter(item => item.currentItem.id === currentItem.id);\r\n// // setArr(arr.map(item => item.currentItem.id === currentItem.id ? item.length++ : item.length))\r\n// //   setArr(arr.map(item => item.currentItem.id === currentItem.id ? {currentItem: currentItem, length: item.length++} : {currentItem: currentItem, length: item.length}));\r\n// //   console.log(arr.map(item => item.currentItem.id === currentItem.id ? {currentItem: currentItem, length: item.length++} : {currentItem: currentItem, length: item.length}))\r\n// console.log(arr.map(item => item.currentItem.id === currentItem.id ? Array.from(new Set(arr.map(item => JSON.stringify([item, {currentItem: currentItem, length: item.length++}])))).map(JSON.parse) : {currentItem: currentItem, length: item.length}))\r\n// // setArr(arr.map(item => [...arr, {currentItem: item.currentItem, length: item.length++}]));\r\n// filtered.length++;\r\n// // console.log(e.currentTarget.parentNode.childNodes[1].value++)\r\n//   if (length >= currentItem.quantity) {\r\n//       console.log();\r\n//   } else {\r\n//       // setArr(arr.map(item => item.currentItem.id === currentItem.id ? item.length++ : item.length))\r\n//       // arr.map(item => item.currentItem.id === currentItem.id ? [...arr, {currentItem: currentItem, length: item.length++}] : {currentItem: currentItem, length: item.length});\r\n//       // setQuentityTovars(prev => ++prev);\r\n//   }"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
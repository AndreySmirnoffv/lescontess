{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Input}from\"./input/Input\";import{useSelector}from\"react-redux\";import StripeCheckout from\"react-stripe-checkout\";import{loadStripe}from\"@stripe/stripe-js\";import{CardElement,useElements,useStripe}from\"@stripe/react-stripe-js\";import axios from\"axios\";import\"./Details.sass\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const Details=()=>{const publishKey=process.env.STRIPE_PUBLIC_KEY;const stripePromise=loadStripe(publishKey);const stripe=useStripe();const elements=useElements();const[data,setData]=useState({name:\"\",currentName:\"\",country:\"\",addres:\"\",hz:\"\",punkt:\"\",pocht:\"\",phone:\"\",email:\"\",primech:\"\"});const state=useSelector(state=>state.basketPrice);useEffect(()=>{if(Object.values(data).includes(\"\")){console.log(\"Есть не заполненные поля\");}},[data]);const handleData=event=>{console.log(event.target);setData(prev=>{return{...prev,[event.target.name]:event.target.value};});};const onToken=token=>{const body={amount:this.amount,//возьми из redux\ntoken:token};axios.post(\"http://localhost:8000/checkout\",body).then(response=>{console.log(response);alert(\"Payment Success\");}).catch(error=>{console.log(\"Payment Error: \"+error);alert(\"Payment Error\");});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"checkout-page-content__left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"checkout-page-content-left__title\",children:\"\\u0414\\u0435\\u0442\\u0430\\u043B\\u0438 \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"checkout-page-content-left__form\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"checkout-page-content-left__person\",children:[/*#__PURE__*/_jsx(Input,{name:\"name\",handleData:handleData,topPlaceholder:\"Имя*\"}),/*#__PURE__*/_jsx(Input,{name:\"currentName\",handleData:handleData,topPlaceholder:\"Фамилия*\"})]}),/*#__PURE__*/_jsx(Input,{name:\"country\",handleData:handleData,list:[\"Россия\",\"Казахстан\"],defaultCity:\"Россия\",topPlaceholder:\"Страна/регион *\"}),/*#__PURE__*/_jsx(Input,{name:\"addres\",handleData:handleData,topPlaceholder:\"Адрес*\",placeholder:\"Номер дома и название улицы\"}),/*#__PURE__*/_jsx(Input,{name:\"hz\",handleData:handleData,placeholder:\"Крыло, подъезд, этаж и т.д. (необязательно)\"}),/*#__PURE__*/_jsx(Input,{name:\"punkt\",handleData:handleData,topPlaceholder:\"Населённый пункт *\"}),/*#__PURE__*/_jsx(Input,{name:\"pocht\",handleData:handleData,topPlaceholder:\"Почтовый индекс *\"}),/*#__PURE__*/_jsx(Input,{name:\"phone\",handleData:handleData,topPlaceholder:\"Телефон *\"}),/*#__PURE__*/_jsx(Input,{name:\"email\",handleData:handleData,topPlaceholder:\"Email *\",type:\"email\"}),/*#__PURE__*/_jsx(Input,{name:\"primech\",handleData:handleData,topPlaceholder:\"Примечание к заказу (необязательно)\",placeholder:\"Примечания к вашему заказу, например, особые пожелания отделу доставки.\",type:\"email\",textarea:true})]}),/*#__PURE__*/_jsx(\"p\",{children:state}),/*#__PURE__*/_jsx(\"section\",{className:\"checkout-page-content-left__button\",children:/*#__PURE__*/_jsx(StripeCheckout,{label:\"Get Product\",name:\"lescontes\",description:\"get product\",panelLabel:\"get product\",amount:null//возьми из редакса\n,token:onToken,stripeKey:publishKey,image:\"\"//сюда вставить лого\n,billingAdress:false,className:\"checkout-page-content-left__stripe-btn\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"checkout-page-content__right\"})]});};","map":{"version":3,"names":["React","useEffect","useState","Input","useSelector","StripeCheckout","loadStripe","CardElement","useElements","useStripe","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Details","publishKey","process","env","STRIPE_PUBLIC_KEY","stripePromise","stripe","elements","data","setData","name","currentName","country","addres","hz","punkt","pocht","phone","email","primech","state","basketPrice","Object","values","includes","console","log","handleData","event","target","prev","value","onToken","token","body","amount","post","then","response","alert","catch","error","children","className","topPlaceholder","list","defaultCity","placeholder","type","textarea","label","description","panelLabel","stripeKey","image","billingAdress"],"sources":["/home/kali/Documents/personal/lescontess/src/layouts/basket/checkout/details/Details.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Input } from \"./input/Input\";\r\nimport { useSelector } from \"react-redux\";\r\nimport StripeCheckout from \"react-stripe-checkout\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\r\nimport axios from \"axios\";\r\nimport \"./Details.sass\";\r\n\r\nexport const Details = () => {\r\n  const publishKey = process.env.STRIPE_PUBLIC_KEY;\r\n  const stripePromise = loadStripe(publishKey);\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n\r\n  const [data, setData] = useState({\r\n    name: \"\",\r\n    currentName: \"\",\r\n    country: \"\",\r\n    addres: \"\",\r\n    hz: \"\",\r\n    punkt: \"\",\r\n    pocht: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    primech: \"\",\r\n  });\r\n  const state = useSelector(state => state.basketPrice);\r\n  useEffect(() => {\r\n    if (Object.values(data).includes(\"\")) {\r\n      console.log(\"Есть не заполненные поля\");\r\n    }\r\n  }, [data]);\r\n\r\n  const handleData = (event) => {\r\n    console.log(event.target);\r\n    setData((prev) => {\r\n      return {\r\n        ...prev,\r\n        [event.target.name]: event.target.value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const onToken = (token) => {\r\n    const body = {\r\n      amount: this.amount, //возьми из redux\r\n      token: token,\r\n    };\r\n    axios\r\n      .post(\"http://localhost:8000/checkout\", body)\r\n      .then(response => {\r\n        console.log(response);\r\n        alert(\"Payment Success\");\r\n      })\r\n      .catch(error => {\r\n        console.log(\"Payment Error: \" + error);\r\n        alert(\"Payment Error\");\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <section className=\"checkout-page-content__left\">\r\n        <p className=\"checkout-page-content-left__title\">Детали оплаты</p>\r\n        <form className=\"checkout-page-content-left__form\">\r\n          <section className=\"checkout-page-content-left__person\">\r\n            <Input\r\n              name={\"name\"}\r\n              handleData={handleData}\r\n              topPlaceholder={\"Имя*\"}\r\n            />\r\n            <Input\r\n              name={\"currentName\"}\r\n              handleData={handleData}\r\n              topPlaceholder={\"Фамилия*\"}\r\n            />\r\n          </section>\r\n          <Input\r\n            name={\"country\"}\r\n            handleData={handleData}\r\n            list={[\"Россия\", \"Казахстан\"]}\r\n            defaultCity={\"Россия\"}\r\n            topPlaceholder={\"Страна/регион *\"}\r\n          />\r\n          <Input\r\n            name={\"addres\"}\r\n            handleData={handleData}\r\n            topPlaceholder={\"Адрес*\"}\r\n            placeholder={\"Номер дома и название улицы\"}\r\n          />\r\n          <Input\r\n            name={\"hz\"}\r\n            handleData={handleData}\r\n            placeholder={\"Крыло, подъезд, этаж и т.д. (необязательно)\"}\r\n          />\r\n          <Input\r\n            name={\"punkt\"}\r\n            handleData={handleData}\r\n            topPlaceholder={\"Населённый пункт *\"}\r\n          />\r\n          <Input\r\n            name={\"pocht\"}\r\n            handleData={handleData}\r\n            topPlaceholder={\"Почтовый индекс *\"}\r\n          />\r\n          <Input\r\n            name={\"phone\"}\r\n            handleData={handleData}\r\n            topPlaceholder={\"Телефон *\"}\r\n          />\r\n          <Input\r\n            name={\"email\"}\r\n            handleData={handleData}\r\n            topPlaceholder={\"Email *\"}\r\n            type=\"email\"\r\n          />\r\n          <Input\r\n            name={\"primech\"}\r\n            handleData={handleData}\r\n            topPlaceholder={\"Примечание к заказу (необязательно)\"}\r\n            placeholder={\r\n              \"Примечания к вашему заказу, например, особые пожелания отделу доставки.\"\r\n            }\r\n            type=\"email\"\r\n            textarea\r\n          />\r\n        </form>\r\n        <p>{state}</p>\r\n        <section className=\"checkout-page-content-left__button\">\r\n          <StripeCheckout\r\n            label=\"Get Product\"\r\n            name=\"lescontes\"\r\n            description=\"get product\"\r\n            panelLabel=\"get product\"\r\n            amount={null} //возьми из редакса\r\n            token={onToken}\r\n            stripeKey={publishKey}\r\n            image=\"\" //сюда вставить лого\r\n            billingAdress={false}\r\n            className=\"checkout-page-content-left__stripe-btn\"\r\n          />\r\n        </section>\r\n      </section>\r\n      <div className=\"checkout-page-content__right\"></div>\r\n    </>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}